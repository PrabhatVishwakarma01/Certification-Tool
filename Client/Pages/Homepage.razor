
@page "/homepage"
@using Tool.Shared
@using Blazorise
@using Blazorise.Bootstrap
@inject HttpClient _http
@inject NavigationManager NavigationManager
@inject IJSRuntime JsRuntime
<Sidebar></Sidebar>


<PageTitle>Home Page</PageTitle>
<body>
    <div class="master p-4">
        <br />
        <br />
        <div class="center">
            <div class="login-actions">
                <button @onclick="Cancel" class="btnADD">Add Quiz</button>
            </div>

            @if (quizList != null) {
                <table class="master-table table table-striped table-borderless">
                    <thead>
                        <tr class="master-head">
                            <th class="master-head"><b>Category</b></th>
                            <th class="master-head"><b>Uploaded By</b></th>
                            <th class="master-head"><b>Allowed Time</b></th>
                            <th class="master-head"><b>Action</b></th>
                        </tr>
                    </thead>
                    <tbody class="master-table3">
                        @foreach (var q in quizList) {
                            <tr class="master-row">
                                <td class="master-tablebody">@q.QuizTitle</td>
                                <td class="master-tablebody">Prabhat Vihswakarma</td>
                                <td class="master-tablebody">@q.Timer</td>
                                <td class="master-tablebody"><button class="btn"><i class="fa fa-edit"></i></button></td>
                            </tr>
                        }
                    </tbody>
                </table>
            }

        </div>
    </div>
   <div class="container">  
        <div class="row">  
            
<ul class = "pagination">  
   <li><a href = "/homepage">«</a></li>
                <li><a href="/homepage">1</a></li>
                
            </ul>  
   
  
</div>  
     </div>  
   
</body>



@code {
   
    List<HomeViewModel> quizList = new List<HomeViewModel>();
    int currentPage = 1;

    protected override async Task OnInitializedAsync() {
        var response = await _http.GetAsync("api/quiz");
        response.EnsureSuccessStatusCode();
        quizList = await response.Content.ReadFromJsonAsync<List<HomeViewModel>>();
        // Sort quizzes by category name
        quizList.Sort((a, b) => string.Compare(a.QuizTitle, b.QuizTitle));
    }

    void OnPageChanged(int page) => currentPage = page;
    void Cancel() {
        NavigationManager.NavigateTo("/addquizcategory");
    }
    
    


}