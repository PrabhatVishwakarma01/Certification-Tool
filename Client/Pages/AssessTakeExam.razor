@page "/assesstakeexam"
@using System.Linq
@using System.Diagnostics;
@using Tool.Shared
@inject IJSRuntime JsRuntime
@inject HttpClient Http
@inject HttpClient _Http
@inject NavigationManager NavigationManager

<div class="container">
    <div class="sidebar">
        <h2>Questions</h2>
        <ul>
            @for (int i = 1; i <= 20; i++)
            {
                <li class="@((i == 1) ? "active" : "")">Ques : @i</li>
            }
        </ul>
    </div>
    <div class="main">
        <div class="main-heading">
            <b>Quiz Category :</b> @quizList.FirstOrDefault()?.QuizTitle
        <div class="timer"> <b>Timer :</b> 00:00:00</div>
        </div>
        <div class="Question-Text">
            <p><b>Question 1 :</b></p>
        </div>
        <div class="contain-options">
            <input type="radio" name="q1" value="a">
            <label for="q1a">Optionone</label><br>
            <br>
            <input type="radio" name="q1" value="b">
            <label for="q1b"> optionTwo</label><br>
            <br>
            <input type="radio" name="q1" value="c">
            <label for="q1c"> Option3</label><br>
            <br>
            <input type="radio" name="q1" value="d">
            <label for="q1d"> Option4</label><br>
        </div>
        <div class="buttons">
            <button class=" btn" id="next">Next</button>
            <button class=" btn alert-danger" data-bs-toggle="modal" data-bs-target="#submitquizmodel">Finish</button>

        </div>
    </div>
</div>
@*Delete dialogue box*@
<div class="modal fade" id="submitquizmodel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog delete-dialog-box">
        <div class="dialog-content">
            <div class="dialog-body">
                Are you sure you want to submit the exam?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn action-btn" data-bs-dismiss="modal">No</button>
                <button type="button" data-bs-dismiss="modal" @onclick=submit class="btn action-btn alert-danger" id="submitquizButton">Yes</button>
            </div>
        </div>
    </div>
</div>

@code {
    List<QuizViewModel> quizList = new List<QuizViewModel>();

    protected override async Task OnInitializedAsync()
    {
        await getQuizCategory();
    }

    async Task getQuizCategory()
    {
        var response = await _Http.GetAsync("api/quiz");
        response.EnsureSuccessStatusCode();
        quizList = await response.Content.ReadFromJsonAsync<List<QuizViewModel>>();
        foreach (var q in quizList)
        {
            Debug.WriteLine(q.QuizTitle);
        }
    }
    void submit()
    {
        NavigationManager.NavigateTo($"/quizresult");
    }
}
